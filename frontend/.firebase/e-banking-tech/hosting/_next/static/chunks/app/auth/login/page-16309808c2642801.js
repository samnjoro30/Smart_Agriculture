(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{2657:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(7565).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3081:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let t=r(3464).A.create({baseURL:"https://smart-agriculture-21dt.onrender.com/",withCredentials:!0});t.interceptors.request.use(e=>(e.withCredentials=!0,e),e=>Promise.reject(e)),t.interceptors.response.use(e=>e,async e=>{let s=e.config;if(s.url.includes("/auth/refresh"))return window.location.href="/auth/login",Promise.reject(e);if(e.response&&401===e.response.status)try{return await t.post("/auth/refresh",{},{withCredentials:!0}),t(s)}catch(e){return window.location.href="/auth/login",Promise.reject(e)}return Promise.reject(e)}),t.defaults.withCredentials=!0;let a=t},4177:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m});var t=r(5155),a=r(2115),n=r(3081),i=r(6766),l=r(5695),o=r(6874),c=r.n(o),d=r(3464),u=r(8749),h=r(2657);function m(){let[e,s]=(0,a.useState)(!1),[r,o]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),[p,g]=(0,a.useState)(""),f=(0,l.useRouter)(),[w,j]=(0,a.useState)({email:"",password:""}),y="block text-green-700 font-bold mb-1",v="w-full px-4 py-2 border border-green-300 bg-green-50 text-green-900 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",b=e=>{let{name:s,value:r}=e.target;j(e=>({...e,[s]:r}))},N=async e=>{e.preventDefault(),s(!0),o(""),g("");try{let e=await n.A.post("/auth/login",w,{withCredentials:!0});g(e.data.message||"login successful"),f.push("/dashboard"),setTimeout(()=>g(""),3e3)}catch(e){if(d.A.isAxiosError(e)){var r,t;(null==(r=e.response)?void 0:r.status)===403?(o("Your account is not verified. Redirecting to verification..."),setTimeout(()=>{f.push("/auth/verification")},1500)):(null==(t=e.response)?void 0:t.status)===400?o("Invalid credentials. Please check your email or password."):o("Something went wrong during login, check credentials. Please try again.")}else o("Unexpected error occurred. Try again later.");setTimeout(()=>o(""),5e3)}finally{s(!1)}};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-green-50 px-4",children:(0,t.jsxs)("div",{className:"w-full max-w-md bg-white shadow-lg rounded-xl p-8 space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"flex justify-centre",children:(0,t.jsx)(i.default,{src:"/logo.png",alt:"Logo",width:80,height:40,className:"mx-auto mb-2 rounded-full"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-green-800",children:"Sign in to your account"})]}),(0,t.jsxs)("form",{className:"space-y-8",onSubmit:N,children:[(0,t.jsxs)("div",{className:"",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:y,children:"Email:"}),(0,t.jsx)("input",{id:"username",name:"email",type:"text",placeholder:"Email",className:v,value:w.email,onChange:b})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:y,children:"Password:"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{id:"password",name:"password",type:m?"text":"password",required:!0,className:v,placeholder:"Enter Password",value:w.password,onChange:b}),(0,t.jsx)("span",{onClick:()=>x(!m),className:"absolute top-2 right-3 cursor-pointer text-green-600",children:m?(0,t.jsx)(u.A,{}):(0,t.jsx)(h.A,{})})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("label",{htmlFor:"remember-me",className:"flex items-center text-green-700",children:[(0,t.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"mr-2 rounded border-green-300 text-green-600 focus:ring-green-500"}),"Remember me"]})}),(0,t.jsx)("div",{className:"text-sm",children:(0,t.jsx)(c(),{href:"/auth/reset-password",className:"text-green-600 hover:underline",children:"Forgot your password?"})})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:e,className:"w-full flex justify-center items-center py-2 px-4 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md transition duration-300 ".concat(e?"opacity-70 cursor-not-allowed":""),children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign in"})})]}),r&&(0,t.jsx)("p",{style:{color:"red"},children:r}),p&&(0,t.jsx)("p",{style:{color:"green"},children:p}),(0,t.jsx)(c(),{href:"/",className:"text-green-600 hover:underline pr-5",children:" ← Back to Home"}),(0,t.jsx)(c(),{href:"/auth/register",className:"text-green-600 hover:underline pl-3 mr-10",children:"Or Register "})]})})}},4756:(e,s,r)=>{Promise.resolve().then(r.bind(r,4177))},5695:(e,s,r)=>{"use strict";var t=r(8999);r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},8749:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(7565).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[464,651,874,441,684,358],()=>s(4756)),_N_E=e.O()}]);